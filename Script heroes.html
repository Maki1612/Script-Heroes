<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Script Heroes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div id="loader-overlay" class="hidden">
    <div id="loader-content">
      <div class="loader-box">
        <div class="seg seg1"></div>
        <div class="seg seg2"></div>
        <div class="seg seg3"></div>
        <div class="seg seg4"></div>
      </div>
      <div class="loader-text">Loading...</div>
    </div>
  </div>
  <div id="star-background">
    <div class="night">
      <!-- Generate ~20 stars via JS or hardcode divs -->
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <div class="shooting_star"></div>
      <!-- ... -->
    </div>
  </div>
  <div id="app">
    <div id="start-screen" class="screen">
      <div class="start-container">
        <h1 class="game-title">Script Heroes</h1>

        <input id="nickname-input" class="input-field" placeholder="Your Nickname">

        <!-- Patch notification (hidden by default) -->
        <div id="patch-notice" class="patch-notice" style="display:none;">
          <span id="patch-text">A new version is available!</span>
          <button id="btn-patch" class="patch-btn">Update</button>
          <button id="btn-patch-dismiss" class="patch-dismiss">✕</button>
        </div>

        <div class="menu-buttons">
          <button id="btn-new-game" class="menu-btn primary">New Game</button>
          <button id="btn-continue" class="menu-btn secondary">Continue</button>
          <button id="btn-load" class="menu-btn secondary">Load Game</button>
          <button id="btn-import-start" class="menu-btn secondary">Import Save</button>
          <button id="btn-settings-start" class="menu-btn secondary">Settings</button>
          <button id="btn-patch-notes" class="menu-btn secondary">Patch Notes</button>
        </div>
        <div id="start-log" class="start-log"></div>
        <div id="load-menu" class="load-menu" style="display:none;"></div>
      </div>
    </div>

    <div id="delete-popup" class="delete-popup" style="display:none;">
      <div class="delete-box">
        <div class="delete-text">Are you sure you want to delete this savefile?</div>
        <div class="delete-buttons">
          <button id="delete-yes" class="delete-btn yes">Yes</button>
          <button id="delete-no" class="delete-btn no">No</button>
        </div>
      </div>
    </div>

    <div id="save-status"></div>

    <div id="version-info">Version 0.0.5b</div>
    </section>


    <section id="game-screen" style="display:none;">

      <header id="header">
        <h2 id="game-title">Script Heroes</h2>
      </header>

      <section id="status-bar">
        <div id="player-name">Name: —</div>
        <div id="player-level">Level: —</div>
        <div id="player-currency">
          <span id="player-gold" title="Gold Coins">G: 0</span>
          <span id="player-silver" title="Silver Coins">S: 0</span>
          <span id="player-bronze" title="Bronze Coins">B: 0</span>
        </div>
        <div id="player-location">Area: —</div>
        <div id="player-alignment">Align: —</div>
      </section>

      <main id="main-area">

        <div id="combat-display" style="display:none;"></div>
        <div id="output-log" aria-live="polite"></div>
      </main>

      <section id="choices"></section>

      <div id="input-area">
        <label for="command-input">Command:</label>
        <input id="command-input" type="text" autocomplete="off">
        <button class="btn" id="command-submit">OK</button>

        <!-- Toggle + Menü zusammen -->
        <div id="menu-wrapper">
          <div id="fullscreen-toggle" title="Toggle Fullscreen">
            <svg id="fs-expand" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="15 3 21 3 21 9" />
              <polyline points="9 21 3 21 3 15" />
              <line x1="21" y1="3" x2="14" y2="10" />
              <line x1="3" y1="21" x2="10" y2="14" />
            </svg>
            <svg id="fs-compress" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
              fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              style="display:none;">
              <polyline points="4 14 10 14 10 20" />
              <polyline points="20 10 14 10 14 4" />
              <line x1="14" y1="10" x2="21" y2="3" />
              <line x1="3" y1="21" x2="10" y2="14" />
            </svg>
          </div>
          <div id="menu-toggle">⋮</div>

          <div id="side-menu">
            <button class="menu-btn" id="btn-inventory">Inventory</button>
            <button class="menu-btn" id="btn-team">Team</button>
            <button class="menu-btn" id="btn-quests">Quests</button>
            <button class="menu-btn" id="btn-travel">Quick Travel</button>
            <button class="menu-btn" id="btn-settings">Settings</button>
            <button class="menu-btn" id="btn-save">Save</button>
            <button class="menu-btn" id="btn-export">Export</button>
            <button class="menu-btn" id="btn-import">Import</button>
            <input type="file" id="import-file" accept="application/json" style="display:none;">
          </div>
        </div>
      </div>


      <div id="version-info-game">Version 0.0.5b</div>
    </section>

    <!-- Global Overlays (Moved outside game-screen for accessibility from start menu) -->
    <!-- Team Management Overlay -->
    <div id="team-menu-overlay" class="overlay" style="display:none;">
      <div class="overlay-content">
        <header class="overlay-header">
          <h2>Team Management</h2>
          <button id="btn-close-team" class="close-btn">X</button>
        </header>

        <nav class="overlay-tabs">
          <button class="tab-btn active" data-tab="team">Team</button>
          <button class="tab-btn" data-tab="roster">Roster</button>
          <button class="tab-btn" data-tab="armory">Armory</button>
        </nav>

        <div class="overlay-body">
          <!-- Team Tab -->
          <section id="tab-team" class="tab-content active" style="position: relative;">
            <div id="active-effects-banner" class="active-effects-banner" style="display:none;"></div>
            <div class="team-slots-container">
              <!-- 5 Slots injected here -->
            </div>
            <button id="btn-view-effects" class="team-effects-btn-small">Team Effects</button>
          </section>

          <!-- Roster Tab -->
          <section id="tab-roster" class="tab-content" style="display:none;">
            <div class="roster-grid">
              <!-- Character list injected here -->
            </div>
          </section>

          <!-- Armory Tab -->
          <section id="tab-armory" class="tab-content" style="display:none;">
            <div class="armory-grid">
              <!-- Equipment list injected here -->
            </div>
          </section>
        </div>
      </div>

      <!-- Character Detail View (Nested Overlay) -->
      <div id="char-detail-view" class="detail-view" style="display:none;">
        <!-- Dynamic Content -->
      </div>
    </div>

    <!-- Quest Log Overlay -->
    <div id="quest-overlay" class="overlay" style="display:none;">
      <div class="overlay-content">
        <header class="overlay-header">
          <h2>Quest Log</h2>
          <button id="btn-close-quests" class="close-btn">X</button>
        </header>
        <nav class="overlay-tabs">
          <button class="quest-tab-btn active" data-qtab="main">Main</button>
          <button class="quest-tab-btn" data-qtab="adventurer">Adventurer</button>
          <button class="quest-tab-btn" data-qtab="comrade">Comrade</button>
          <button class="quest-tab-btn" data-qtab="daily">Daily</button>
        </nav>
        <div class="overlay-body" id="quest-body">
          <!-- Dynamic quest list -->
        </div>
      </div>
    </div>

    <!-- Settings Overlay -->
    <div id="settings-overlay" class="overlay" style="display:none;">
      <div class="overlay-content settings-panel">
        <header class="overlay-header">
          <h2>Settings</h2>
          <button id="btn-close-settings" class="close-btn">X</button>
        </header>
        <div class="overlay-body">
          <div class="setting-group">
            <label class="setting-label">Text Speed</label>
            <div class="setting-options" id="text-speed-options">
              <button class="setting-btn" data-speed="0.5">50%</button>
              <button class="setting-btn active" data-speed="1">100%</button>
              <button class="setting-btn" data-speed="1.5">150%</button>
              <button class="setting-btn" data-speed="2">200%</button>
            </div>
          </div>
          <div class="setting-group">
            <label class="setting-label">Narration Style</label>
            <div class="setting-options" id="narration-style-options">
              <button class="setting-btn" data-style="narrator">Narrator</button>
              <button class="setting-btn" data-style="block">Block</button>
            </div>
          </div>
          <div class="setting-group">
            <label class="setting-label">Toggle Hotkey</label>
            <div class="setting-hotkey-row">
              <button id="btn-bind-hotkey" class="setting-btn hotkey-bind-btn">None</button>
              <span class="hotkey-tip">Click to bind (cannot be Esc, F-keys, or Mouse)</span>
            </div>
          </div>
          <div class="setting-group">
            <label class="setting-label">Music Volume</label>
            <div class="setting-slider-row">
              <input type="range" id="music-volume-slider" class="setting-slider" min="0" max="100" value="100">
              <span id="music-volume-value" class="setting-slider-value">100%</span>
            </div>
            <label class="setting-checkbox-row">
              <input type="checkbox" id="music-mute-checkbox">
              <span>Mute Music</span>
            </label>
            <label class="setting-checkbox-row">
              <input type="checkbox" id="fullscreen-checkbox">
              <span>Fullscreen Mode</span>
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Inventory Overlay -->
    <div id="inventory-overlay" class="overlay" style="display:none;">
      <div class="overlay-content inventory-panel">
        <header class="overlay-header">
          <h2>Inventory</h2>
          <button id="btn-close-inventory" class="close-btn">X</button>
        </header>
        <nav class="overlay-tabs">
          <button class="inv-tab-btn active" data-inv-tab="consumable">Consumables</button>
          <button class="inv-tab-btn" data-inv-tab="material">Materials</button>
          <button class="inv-tab-btn" data-inv-tab="key">Key Items</button>
          <button class="inv-tab-btn" data-inv-tab="equipment">Equipment</button>
        </nav>
        <div class="overlay-body inventory-body">
          <div id="inventory-grid" class="inventory-grid">
            <!-- Item cards injected here -->
          </div>
          <div id="inventory-detail" class="inventory-detail" style="display:none;">
            <div id="inv-detail-icon" class="inv-detail-icon"></div>
            <h3 id="inv-detail-name"></h3>
            <div id="inv-detail-rarity" class="inv-detail-rarity"></div>
            <p id="inv-detail-desc" class="inv-detail-desc"></p>
            <div id="inv-detail-stats" class="inv-detail-stats"></div>
            <div id="inv-detail-actions" class="inv-detail-actions"></div>
          </div>
        </div>
      </div>
    </div>

    </section>

  </div>

  <script src="./main.js"></script>
</body>

</html>